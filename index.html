<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Application Form</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
        background-color: #f8f9fa;
        color: #333;
      }

      h1 {
        text-align: center;
        margin-bottom: 30px;
      }

      form {
        background: #fff;
        padding: 25px;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        max-width: 800px;
        margin: auto;
      }

      .form-section {
        margin-bottom: 25px;
      }

      label {
        display: block;
        margin-top: 12px;
        font-weight: bold;
      }

      input,
      textarea,
      select {
        width: 100%;
        padding: 10px;
        margin-top: 4px;
        box-sizing: border-box;
        border: 1px solid #ccc;
        border-radius: 8px; /* Rounded corners */
        font-size: 14px;
        transition: border-color 0.3s ease;
      }

      input:focus,
      textarea:focus {
        border-color: #007bff;
        outline: none;
      }

      .inline {
        display: inline-block;
        width: 48%;
      }

      .inline-third {
        display: inline-block;
        width: 30%;
      }

      .error {
        color: red;
        font-size: 0.9em;
        text-align: center;
      }

      .radio-group label {
        display: inline;
        margin-right: 15px;
      }

      .invalid {
        border-color: red !important;
      }

      .error-msg {
        color: red;
        font-size: 0.8em;
        margin-top: 2px;
      }

      button[type="submit"] {
        background-color: #007bff;
        color: white;
        padding: 12px 20px;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        cursor: pointer;
        margin-top: 20px;
        display: block;
        width: 100%;
      }

      button[type="submit"]:hover {
        background-color: #0056b3;
      }
      

      
      button[type="button" class="back-button"] {
        background-color: #007bff;
        color: white;
        padding: 12px 20px;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        cursor: pointer;
        margin-top: 20px;
        display: flexbox;
        width: 100%;
        flex-direction: column;
      }
      
       button[type="button" class="next-button"] {
        background-color: #007bff;
        color: white;
        padding: 12px 20px;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        cursor: pointer;
        margin-top: 20px;
        display: flexbox;
        width: 100%;
        flex-direction: column;
      }
      
      .form-step {
  display: none;
}

.form-step.active {
  display: block;
}

.nav-buttons {
  margin-top: 20px;
  text-align: right;
}

.nav-buttons button {
  margin-left: 10px;
}
    </style>
  </head>

  <body>
    <h1>Staff Application Form</h1>
    <form id="applicationForm" method="POST" action="https://lg79jetlzf.execute-api.us-east-1.amazonaws.com/submit_staff_app">
      <div class="form-step active" data-step="1">
  <h2>General Information</h2>
      <div class="form-section">
        <label>Position(s) Applying For <input type="text" name="job" required /></label>
        <div class="inline-third">
          <label>Date of Birth <input type="date" name="dob" required /></label>
        </div>
        <div class="inline-third">
          <label>Age <input type="number" name="age" required min="0" /></label>
        </div>
      </div>
      
      <div class="form-section">
        <label>Full Name</label> <br />
        <div class="inline"><input type="text" name="lastName" placeholder="Last" required /></div>
        <div class="inline"><input type="text" name="firstName" placeholder="First" required /></div>
        <label>Social Security # <input type="text" name="ssn" required /></label>
      </div>
        
              

      <div class="form-section">
        <label>Home Phone <input type="tel" name="homePhone" required /></label>
        <label>Cell Phone <input type="tel" name="cellPhone" required /></label>
        <label>Email <input type="email" name="email" required /></label>
      </div>
         <div class="nav-buttons" >
  <button type="button" class="next-button">Next</button>
</div>
<div class="form-step active" data-step="2">
      <div class="form-section">
        <label>Home Address <input type="text" name="homeAddress" required /></label>
        <div class="inline">
          <label>City <input type="text" name="homeCity" required /></label>
        </div>
        <div class="inline">
          <label
            >State
            <select id="homeState" name="homeState" size="1" required>
              <option></option>
              <option value="Alabama">Alabama</option>
              <option value="Alaska">Alaska</option>
              <option value="Arizona">Arizona</option>
              <option value="Arkansas">Arkansas</option>
              <option value="California">California</option>
              <option value="Colorado">Colorado</option>
              <option value="Connecticut">Connecticut</option>
              <option value="Delaware">Delaware</option>
              <option value="Florida">Florida</option>
              <option value="Georgia">Georgia</option>
              <option value="Hawaii">Hawaii</option>
              <option value="Idaho">Idaho</option>
              <option value="Illinois">Illinois</option>
              <option value="Indiana">Indiana</option>
              <option value="Iowa">Iowa</option>
              <option value="Kansas">Kansas</option>
              <option value="Kentucky">Kentucky</option>
              <option value="Louisiana">Louisiana</option>
              <option value="Maine">Maine</option>
              <option value="Maryland">Maryland</option>
              <option value="Massachusetts">Massachusetts</option>
              <option value="Michigan">Michigan</option>
              <option value="Minnesota">Minnesota</option>
              <option value="Mississippi">Mississippi</option>
              <option value="Missouri">Missouri</option>
              <option value="Montana">Montana</option>
              <option value="Nebraska">Nebraska</option>
              <option value="Nevada">Nevada</option>
              <option value="New Hampshire">New Hampshire</option>
              <option value="New Jersey">New Jersey</option>
              <option value="New Mexico">New Mexico</option>
              <option value="New York">New York</option>
              <option value="North Carolina">North Carolina</option>
              <option value="North Dakota">North Dakota</option>
              <option value="Ohio">Ohio</option>
              <option value="Oklahoma">Oklahoma</option>
              <option value="Oregon">Oregon</option>
              <option value="Pennsylvania">Pennsylvania</option>
              <option value="Rhode Island">Rhode Island</option>
              <option value="South Carolina">South Carolina</option>
              <option value="South Dakota">South Dakota</option>
              <option value="Tennessee">Tennessee</option>
              <option value="Texas">Texas</option>
              <option value="Utah">Utah</option>
              <option value="Vermont">Vermont</option>
              <option value="Virginia">Virginia</option>
              <option value="Washington">Washington</option>
              <option value="West Virginia">West Virginia</option>
              <option value="Wisconsin">Wisconsin</option>
              <option value="Wyoming">Wyoming</option></select
            ><br
          /></label>
        </div>
        <label>Zip <input type="text" name="homeZip" required /></label>

        <label>Mailing Address (if different) <input type="text" name="mailAddress" /></label>
        <div class="inline">
          <label>City <input type="text" name="mailCity" /></label>
        </div>
        <div class="inline">
          <label>State <input type="text" name="mailState" /></label>
        </div>
        <label>Zip <input type="text" name="mailZip" /></label>
      </div>
  
        
        <div class="nav-buttons" >
          <button type="button" class="back-button">Back</button>
  <button type="button" class="next-button">Next</button>
</div>
        
        </div>
      </div>
      <div class="form-step" data-step="3" >
  <h2>Yeshiva Information</h2>
<!--Up to here in adding to the google script-->
      <div class="form-section">
        <label>Yeshiva Attending <input type="text" name="yeshiva" required /></label>
        <div class="inline">
          <label>Hebrew Grade <input type="text" name="hebrewGrade" required /></label>
        </div>
        <div class="inline">
          <label>English Grade <input type="text" name="englishGrade" required /></label>
        </div>
        <label>Rebbi's Name <input type="text" name="rebbi" required /></label>
        <label>Rebbi's Phone # <input type="tel" name="rebbiPhone" required /></label>
        <label>Years in this Yeshiva <input type="number" name="yearsYeshiva" required /></label>
        <label>Previous Yeshivas (if less than 2 years) <textarea name="prevYeshivas"></textarea></label>
      </div>
        
        <div class="nav-buttons">
  <button type="button" class="back-button">Back</button>
  <button type="button" class="next-button">Next</button>
</div>
        
      </div>
      <div class="form-step" data-step="4" >
  <h2>Family Information</h2>
      <div class="form-section">
        <label>Father’s Name <input type="text" name="fatherName" required /></label>
        <label>Occupation <input type="text" name="fatherOccupation" required /></label>
        <label>Father’s Cell <input type="tel" name="fatherCell" required /></label>

        <label>Mother’s Name <input type="text" name="motherName" required /></label>
        <label>Occupation <input type="text" name="motherOccupation" required /></label>
        <label>Mother’s Cell <input type="tel" name="motherCell" required /></label>

        <label>Parents' Marital Status <input type="text" name="maritalStatus" required /></label>
        <label>Shul Name <input type="text" name="shul" required /></label>
      </div>
        
        <div class="nav-buttons">
  <button type="button" class="back-button">Back</button>
  <button type="button" class="next-button">Next</button>
</div>
        
      </div>
      <div class="form-step" data-step="5" >
  <h2>Prevous Experience</h2>
      <div class="form-section">
        <h3>Experience</h3>
        <label>Camp #1 <input type="text" name="camp1" placeholder="Name / Years / Position" /></label>
        <label>Camp #2 <input type="text" name="camp2" placeholder="Name / Years / Position" /></label>
        <label>Camp #3 <input type="text" name="camp3" placeholder="Name / Years / Position" /></label>
        <label>Other Experience <textarea name="otherExp"></textarea></label>
      </div>

      <div class="form-section">
        <label>Skills, Talents, and Competency Level <textarea name="skills" required></textarea></label>
      </div>

        <div class="nav-buttons">
  <button type="button" class="back-button">Back</button>
  <button type="button" class="next-button">Next</button>
</div>
        
      </div>
      
      <div class="form-step" data-step="6" >
  <h2>Other stuff</h2>
      
      <div class="form-section">
        <label>Have you ever been convicted of any crime (including child abuse)?</label>
        <div class="radio-group">
          <label><input type="radio" name="convicted" value="yes" required /> Yes</label>
          <label><input type="radio" name="convicted" value="no" required /> No</label>
        </div>
      </div>

      <div class="form-section">
        <h3>References</h3>
        <label>Reference #1 <input type="text" name="ref1" placeholder="Name / Title / Phone" required /></label>
        <label>Reference #2 <input type="text" name="ref2" placeholder="Name / Title / Phone" required /></label>
      </div>
        <div class="nav-buttons">
  <button type="button" class="back-button">Back</button>
</div>
      <button type="submit">Submit</button>
      
      </div>
      <p class="error" id="formError"></p>
    </form>

    <script>
      document.getElementById("applicationForm").addEventListener("submit", function (e) {
        const form = e.target;
        const errorBox = document.getElementById("formError");
        errorBox.textContent = ""; // clear previous errors
        let focusSet = false;

        const showError = (msg, field) => {
          errorBox.textContent = msg;
          if (!focusSet && field) {
            field.focus();
            focusSet = true;
          }
        };

        const requiredFields = form.querySelectorAll("[required]");
        for (let field of requiredFields) {
          if (!field.value.trim()) {
            e.preventDefault();
            return showError("Please fill out all required fields.", field);
          }
        }

        // Validate SSN (must be 9 digits or in format XXX-XX-XXXX)
        const ssn = form.ssn.value.trim();
        if (!/^\d{3}-\d{2}-\d{4}$/.test(ssn) && !/^\d{9}$/.test(ssn)) {
          e.preventDefault();
          return showError("Please enter a valid SSN (XXX-XX-XXXX or 9 digits).", form.ssn);
        }

        // Validate phone numbers
        const phoneFields = ["homePhone", "cellPhone", "rebbiPhone", "fatherCell", "motherCell"];
        for (let name of phoneFields) {
          const phone = form[name].value.replace(/\D/g, "");
          if (!/^\d{10}$/.test(phone)) {
            e.preventDefault();
            return showError("Please enter a valid 10-digit phone number.", form[name]);
          }
        }

        // Validate email (extra validation just in case)
        const email = form.email.value;
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
          e.preventDefault();
          return showError("Please enter a valid email address.", form.email);
        }

        // Validate names (only letters and spaces)
        const nameFields = ["lastName", "firstName", "fatherName", "motherName", "rebbi"];
        for (let name of nameFields) {
          if (!/^[a-zA-Z\s'-]+$/.test(form[name].value)) {
            e.preventDefault();
            return showError("Names may only contain letters, spaces, hyphens, and apostrophes.", form[name]);
          }
        }

        // Validate Zip code
        const zip = form.homeZip.value.trim();
        if (!/^\d{5}(-\d{4})?$/.test(zip)) {
          e.preventDefault();
          return showError("Please enter a valid ZIP code (5 or 9 digits).", form.homeZip);
        }

        // Validate age
        const age = parseInt(form.age.value);
        if (isNaN(age) || age < 14 || age > 99) {
          e.preventDefault();
          return showError("Please enter a valid age (14–99).", form.age);
        }

        // Validate conviction radio buttons
        if (!form.querySelector('input[name="convicted"]:checked')) {
          e.preventDefault();
          return showError("Please answer the crime conviction question.");
        }

        // All good
        return true;
      });

      const formatSSN = (value) => {
        return value
          .replace(/\D/g, "")
          .slice(0, 9)
          .replace(/^(\d{3})(\d{0,2})(\d{0,4})$/, (_, p1, p2, p3) => {
            return [p1, p2, p3].filter(Boolean).join("-");
          });
      };

      const formatPhone = (value) => {
        return value
          .replace(/\D/g, "")
          .slice(0, 10)
          .replace(/^(\d{3})(\d{0,3})(\d{0,4})$/, (_, p1, p2, p3) => {
            if (!p2) return `(${p1}`;
            if (!p3) return `(${p1}) ${p2}`;
            return `(${p1}) ${p2}-${p3}`;
          });
      };

      const validateField = (field, valid, message) => {
        const existingMsg = field.parentNode.querySelector(".error-msg");
        if (!valid) {
          field.classList.add("invalid");
          if (!existingMsg) {
            const span = document.createElement("span");
            span.className = "error-msg";
            span.textContent = message;
            field.parentNode.appendChild(span);
          } else {
            existingMsg.textContent = message;
          }
        } else {
          field.classList.remove("invalid");
          if (existingMsg) existingMsg.remove();
        }
      };
      const form = document.getElementById("applicationForm");

      // Auto-format + validate SSN
      form.ssn.addEventListener("input", (e) => {
        e.target.value = formatSSN(e.target.value);
        const valid = /^\d{3}-\d{2}-\d{4}$/.test(e.target.value);
        validateField(e.target, valid, "SSN must be in XXX-XX-XXXX format");
      });

      // Phone Fields
      const phoneNames = ["homePhone", "cellPhone", "rebbiPhone", "fatherCell", "motherCell"];
      phoneNames.forEach((name) => {
        const field = form[name];
        field.addEventListener("input", (e) => {
          e.target.value = formatPhone(e.target.value);
          const valid = /^\(\d{3}\) \d{3}-\d{4}$/.test(e.target.value);
          validateField(e.target, valid, "Phone must be in (XXX) XXX-XXXX format");
        });
      });

      // Email live validation
      form.email.addEventListener("input", (e) => {
        const valid = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.target.value);
        validateField(e.target, valid, "Enter a valid email address");
      });

      // Zip code validation
      form.homeZip.addEventListener("input", (e) => {
        const value = e.target.value.replace(/[^\d\-]/g, "").slice(0, 10);
        e.target.value = value;
        const valid = /^\d{5}(-\d{4})?$/.test(value);
        validateField(e.target, valid, "ZIP must be 5 digits or ZIP+4");
      });

      // Name validation (letters, spaces, hyphens, apostrophes)
      const nameFields = ["firstName", "lastName", "rebbi", "fatherName", "motherName"];
      nameFields.forEach((name) => {
        const field = form[name];
        field.addEventListener("input", (e) => {
          const valid = /^[a-zA-Z\s'-]*$/.test(e.target.value);
          validateField(e.target, valid, "Only letters, spaces, apostrophes, and hyphens allowed");
        });
      });

      // Age check
      form.age.addEventListener("input", (e) => {
        const age = parseInt(e.target.value);
        const valid = age >= 14 && age <= 99;
        validateField(e.target, valid, "Age must be between 14–99");
      });
      
  document.addEventListener("DOMContentLoaded", function () {
      
      let currentStep = 1;
const steps = document.querySelectorAll(".form-step");
const totalSteps = steps.length;
const form = document.getElementById("applicationForm");

function showStep(step) {
  steps.forEach((stepDiv) => {
    stepDiv.classList.remove("active");
  });
  const nextStep = document.querySelector(`.form-step[data-step="${step}"]`);
  if (nextStep) {
    nextStep.classList.add("active");
  }
}
showStep(currentStep);

// Validate current step
function validateStep(step) {
  const stepDiv = document.querySelector(`.form-step[data-step="${step}"]`);
  const requiredFields = stepDiv.querySelectorAll("[required]");
  let allValid = true;

  for (let field of requiredFields) {
    const value = field.value.trim();
    if (!value) {
      field.classList.add("invalid");
      allValid = false;
    } else {
      field.classList.remove("invalid");
    }
  }

  if (!allValid) {
    const errorBox = document.getElementById("formError");
    errorBox.textContent = "Please fill out all required fields in this section.";
  }

  return allValid;
}

// Button handlers
form.addEventListener("click", function (e) {
  if (e.target.classList.contains("next-button")) {
    e.preventDefault();
    if (validateStep(currentStep)) {
      currentStep++;
      showStep(currentStep);
      document.getElementById("formError").textContent = "";
    }
  }

  if (e.target.classList.contains("back-button")) {
    e.preventDefault();
    currentStep--;
    showStep(currentStep);
    document.getElementById("formError").textContent = "";
  }
});
    });
    </script>
  </body>
</html>